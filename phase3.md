# فاز ۳ – Open vSwitch (OVS)

## معرفی
فاز ۳ یک ابزار تعاملی مبتنی بر ترمینال (TUI) برای مدیریت سوئیچ مجازی Open vSwitch در سیستم‌عامل لینوکس است.  
هدف این فاز، ساده‌سازی مدیریت bridge، port و VLAN بدون نیاز به اجرای مستقیم دستورات OVS می‌باشد.

کاربر می‌تواند از طریق منوهای گرافیکی در ترمینال، تنظیمات مربوط به OVS را به‌صورت مرحله‌به‌مرحله و ایمن اعمال کند.  
این فاز روی **Debian 12** و **Ubuntu** تست شده است.

---

## قابلیت‌ها
در فاز ۳ امکانات زیر ارائه می‌شود:

### مدیریت Bridge
- ایجاد bridge جدید در Open vSwitch
- حذف bridge موجود

### مدیریت Port
- اضافه کردن port به bridge
- حذف port از bridge
- فعال (UP) کردن port
- غیرفعال (DOWN) کردن port

### تنظیم VLAN روی Port
- تنظیم port در حالت **Access**
- تنظیم port در حالت **Trunk**
- تعیین VLANهای مجاز برای portهای Trunk

### مدیریت VLAN Interface
- ایجاد VLAN interface (internal)
- تخصیص IP به VLAN interface
- حذف IP از VLAN interface
- حذف کامل VLAN interface

تمام ورودی‌های کاربر قبل از اعمال تغییرات بررسی (Validation) می‌شوند تا از ورود مقادیر نامعتبر جلوگیری شود.

---






## توضیح مفاهیم

### OVS Port Name چیست؟
منظور از **OVS Port Name** نام پورتی است که قبلاً به یک bridge در Open vSwitch اضافه شده است.  
این نام می‌تواند یکی از موارد زیر باشد:
- نام یک interface فیزیکی (مانند `enp3s0`)
- نام یک interface مجازی
- نام پورتی که با گزینه Add port to bridge به OVS اضافه شده است

قبل از تنظیم VLAN در حالت Access یا Trunk، پورت موردنظر باید حتماً به bridge اضافه شده باشد.

---

## VLAN Access
در حالت Access، پورت فقط عضو **یک VLAN مشخص** می‌شود و تمام ترافیک آن بدون تگ عبور می‌کند.  
در این حالت، کاربر تنها یک VLAN ID وارد می‌کند.

---

## VLAN Trunk
در حالت Trunk، پورت می‌تواند ترافیک چند VLAN مختلف را عبور دهد، اما فقط VLANهایی که به‌عنوان VLAN مجاز مشخص شده‌اند.

### فرمت صحیح وارد کردن VLANهای مجاز
برای تعیین VLANهای مجاز در حالت Trunk، VLAN IDها باید به‌صورت زیر وارد شوند:


10,20,30


مثال نادرست:

10, 20, 30


---

## VLAN Interface
VLAN Interface یک interface داخلی در Open vSwitch است که به یک VLAN مشخص تعلق دارد.  
این interface معمولاً برای تخصیص IP و انجام تنظیمات لایه شبکه استفاده می‌شود.

امکانات مربوط به VLAN Interface شامل:
- ایجاد interface
- تخصیص IP
- حذف IP
- حذف کامل interface

---

## پیش‌نیازها
قبل از استفاده از این فاز، موارد زیر باید روی سیستم موجود باشد:
- سیستم‌عامل لینوکس (Debian 12 یا Ubuntu)
- Python نسخه 3.10 یا بالاتر
- نصب بودن Open vSwitch
- دسترسی root

ابزار سیستمی مورد نیاز:
- `ovs-vsctl`
- `ip`

---

## جمع‌بندی
در فاز ۳، مدیریت کامل Open vSwitch شامل bridge، port، VLAN (در حالت‌های Access و Trunk) و VLAN interface به‌صورت تعاملی پیاده‌سازی شده است.  
طراحی این فاز مطابق رفتار واقعی سیستم انجام شده و تمرکز اصلی بر سادگی، شفافیت و جلوگیری از تنظیمات گمراه‌کننده بوده است.
